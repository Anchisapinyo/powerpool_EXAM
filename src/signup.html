<!DOCTYPE html>

<html>

  <head>
    <title>POWER POOL</title>
    <link
      href='https://fonts.googleapis.com/css?family=Titillium+Web:400,300,600'
      rel='stylesheet' type='text/css'>
    <link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
    <link rel="stylesheet" href="css/style.css">

  </head>

  <body>


    <div class="form">
      <ul class="tab-group">
        <li class="tab active"><a href="#signup">Sign Up</a></li>
        <li class="tab"><a href="#login">Sign In</a></li>
      </ul>
      <div class="tab-content">
        <div id="signup">
          <h1>Sign Up for Free</h1>
          <form action="#" onsubmit="return signup()">
            <div class="top-row">
              <div class="field-wrap">
                <label>First Name<span class="req">*</span></label>
                <input type="text" id="first" name="first"
                  required
                  autocomplete="off" />

              </div>

              <div class="field-wrap">
                <label>Meter ID<span class="req">*</span></label>
                <input type="text" id="last" name="last"
                  required
                  autocomplete="off" />
              </div>
            </div>
            <div class="field-wrap">
              <label>Email Address<span class="req">*</span></label>
              <input type="email" id="email" name="email" required
                autocomplete="off" />
            </div>
            <div class="top-row">
              <div class="field-wrap">
                <label>Password<span class="req">*</span></label>
                <input type="password" id="pwd" name="pwd"
                  required
                  autocomplete="off" />
                <span id="pwderror" class="text-danger
                  font-weight-bold"> </span>
              </div>

              <div class="field-wrap">
                <label>Confirm Password<span class="req">*</span></label>
                <input type="password" id="pwdre" required
                  name="pwd-repeat"
                  autocomplete="off" />
                <span id="pwdreerror" class="text-danger
                  font-weight-bold"> </span>
              </div>
            </div>
            <input type="submit" name="submit" value="Get Started"
              class="button button-block" autocomplete="off">
          </form>

        </div>

        <div id="login">
          <h1>Welcome Back!</h1>
          <br>

          <form>
            <div class="field-wrap">
              <label>
                Account<span class="req">*</span>
              </label>
              <input type="email" name="email" id="input-email"
                required autocomplete="off" />
            </div>

            <div class="field-wrap">
              <label>
                Password<span class="req">*</span>
              </label>
              <input type="password" name="pwd" id="input-pwd"
                required autocomplete="off" />
            </div>

            <p class="forgot"><a href="forgetpass.html">Forgot
                Password?</a></p>

            <input type="button" onclick="signin()" value="Sign In"
              id="btn-signin2" class="button
              button-block" />

          </form>

        </div>

      </div>

    </div>

    <div id="myModal7" class="modal">
      <div class="modal-content7">
        <div class="modal-header">
          <span class="close7">&times;</span>
          <span class="sp7">Sign In</span>
        </div>
        <div class="modal-body">
          <p id="p7">Valid Password</p><br>
          <p id="p8">" Welcome to POWER POOL "</p>
        </div>
        <div class="modal-footer">
          <button id="btn-enter"><a href="home.html">Click Here</a></button>
        </div>
      </div>
    </div>

    <script
      src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
    <script src="js/index.js"></script>
    <script type="text/javascript">
         
      var script_url = "https://script.google.com/macros/s/AKfycbw0uwGt2XmV97tp2fZXK8PCx0YDGjXmBl8m5ySCqdbDzzoHWwU/exec";

      function signup() {

        var _first = document.getElementById('first').value;
        var _last = document.getElementById('last').value;
        var _email = document.getElementById('email').value;
        var _pwd = document.getElementById('pwd').value;
        var _pwdre = document.getElementById('pwdre').value;

          if((_pwd.length > 6) || (_pwd.length < 6)) {
                    
            alert("Passwords lenght must be 6");
				      return false;	
			      }
			    if(_pwd!=_pwdre){
              
            alert("Password does not match the confirm password");
				      return false;
          } else{
              var url = script_url + "?callback=ctrlq&_first=" + _first + "&_last=" + _last + "&_email=" + _email + "&_pwd=" + _pwd + "&action=signup"

              alert("Your default Account: POWERPOOL+password");

              var request = jQuery.ajax({
                crossDomain: true,
                url: url,
                method: "POST",
                dataType: "jsonp"
              })
            }
          }

      function ctrlq(e) {
        var modal7 = document.getElementById("myModal7");
        var btn7 = document.getElementById("btn-signin2");
        var span7 = document.getElementsByClassName("close7")[0];

        if (e.result == "Valid Password"){
          modal7.style.display = "block";
        }else{
          alert(e.result);
        }
       
        console.log(e.result);

        span7.onclick = function() {
          modal7.style.display = "none";
        }

        window.onclick = function(event) {
          if (event.target == modal7) {
            modal7.style.display = "none";
          }
        }
              
       
      }

            function signin() {

                var _inpwd = document.getElementById('input-pwd').value;
                var _inemail = document.getElementById('input-email').value;

                if((_inpwd.length > 6) || (_inpwd.length < 6)) {
                    alert("Passwords lenght must be 6");
                    return false;	
                }else{
                    var url = script_url + "?callback=ctrlq&_inemail=" + _inemail + "&_inpwd=" + _inpwd + "&action=signin";

                    var request = jQuery.ajax({
                    crossDomain: true,
                    url: url,
                    method: "POST",
                    dataType: "jsonp"
                    }) 
                  }

            }

        </script>
  </body>

</html>